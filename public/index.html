<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PSC Impact Stories</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap"
      rel="stylesheet"
    />

    <link href="./css/styles.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Nav Bar -->
    <nav class="navbar navbar-expand-md">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img
            src="./images/blue-logo.png"
            alt="Pittsburgh Computing Center"
            height="37"
          />
        </a>

        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link active" href="#">Home</a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
              >
                About
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Staff</a></li>
                <li><a class="dropdown-item" href="#">Careers</a></li>
                <li><a class="dropdown-item" href="#">Giving</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Resources
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Allocations</a></li>
                <li><a class="dropdown-item" href="#">Anton</a></li>
                <li><a class="dropdown-item" href="#">Bridges-2</a></li>
                <li><a class="dropdown-item" href="#">Neocortex</a></li>
                <li><a class="dropdown-item" href="#">Software</a></li>
                <li>
                  <a class="dropdown-item" href="#">Training & Education</a>
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Research
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">AI & Big Data</a></li>
                <li><a class="dropdown-item" href="#">Biomedical</a></li>
                <li><a class="dropdown-item" href="#">Applications</a></li>
                <li><a class="dropdown-item" href="#">Networking</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Services
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" href="#">Consulting Services</a>
                </li>
                <li><a class="dropdown-item" href="#">3ROX</a></li>
              </ul>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="#"> Collaborations </a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                News & Events
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">News</a></li>
                <li><a class="dropdown-item" href="#">Calendar</a></li>
                <li><a class="dropdown-item" href="#">Tours</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Intro Section -->
    <section class="p-5 text-center impact-intro">
      <div class="container">
        <h1 class="mb-3">PSC Impact Stories</h1>
        <p class="lead">
          Discover how Pittsburgh Supercomputer Center’s advanced computing resources are empowering
          researchers to solve real-world challenges, from AI breakthroughs to
          climate modeling.
        </p>
      </div>
    </section>

    <!-- Intro Section - Message  -->
    <section class="p-5 intro-message">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-6">
            <h3 class="mb-3">
              The Real Impact at the Pittsburgh Supercomputing Center
            </h3>
            <h6 class="mb-5">
              Welcome to PSC Impact Stories — a space dedicated to celebrating
              the people behind our progress.
            </h6>
            <p class="message-1">
              For over 35 years, Pittsburgh Supercomputer Center has been a national leader in advanced
              research computing — a place where researchers come to get
              meaningful work done. Here, we spotlight the people behind
              groundbreaking projects, creative solutions, and quiet moments of
              leadership. Whether through innovation, collaboration, or
              mentorship, these stories reflect the spirit of a community
              dedicated to supporting researchers locally, nationally, and
              internationally.
            </p>

            <p class="message-2">
              From high-performance networking to hands-on user support, from
              inclusive teamwork to growing the next generation of talent, Pittsburgh Supercomputer Center
              continues to evolve together. By sharing our stories, we not only
              honor the impact of our work but strengthen the connections that
              move discovery forward.
            </p>
          </div>
          <div class="col-md-6 text-center">
            <img
              src="./images/collage_psc.jpg"
              alt="Impact Illustration"
              class="img-fluid"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Dynamic Story Viewer -->
    <section class="p-5 bg-light">
      <div class="container">
        <h3 class="mb-4 text-center">Explore Our Impact Stories</h3>

        <!-- Filter Dropdown -->
        <div class="mb-4 text-center">
          <label for="tagFilter" class="form-label me-2">Filter by tag:</label>
          <select id="tagFilter" class="form-select w-auto d-inline-block">
            <option value="All">All</option>
            <option value="AI">AI</option>
            <option value="Climate">Climate</option>
            <option value="Genomics">Genomics</option>
            <option value="Healthcare">Healthcare</option>
            <option value="Urban Planning">Urban Planning</option>
            <option value="Biochemistry">Biochemistry</option>
          </select>
        </div>

        <div id="storyGrid" class="row row-cols-1 row-cols-md-3 g-4"></div>
      </div>
    </section>

    <!-- Story Modal -->
    <div
      class="modal fade"
      id="storyModal"
      tabindex="-1"
      aria-labelledby="storyModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="storyModalLabel"></h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" id="storyModalBody"></div>
        </div>
      </div>
    </div>
  </body>
</html>

<script>
  async function loadStories() {
    const response = await fetch("./data/data.json");
    const stories = await response.json();
    const storyGrid = document.getElementById("storyGrid");
    const tagFilter = document.getElementById("tagFilter");

    function renderStories(filter = "All") {
      storyGrid.innerHTML = "";
      const filtered =
        filter === "All"
          ? stories
          : stories.filter((s) => s.tags.includes(filter));

      filtered.forEach((story) => {
        const card = document.createElement("div");
        card.className = "col";
        card.innerHTML = `
          <div class="card h-100 shadow-sm" style="cursor: pointer;">
            <img src="${story.image}" class="card-img-top" alt="${
          story.title
        }" />
            <div class="card-body">
              <h5 class="card-title">${story.title}</h5>
              <p class="card-text">${story.description}</p>
              <p><strong>${story.researcher}</strong></p>
              <div class="mb-2">
                ${story.tags
                  .map(
                    (tag) =>
                      `<span class="badge bg-secondary me-1">${tag}</span>`
                  )
                  .join("")}
              </div>
            </div>
          </div>
        `;
        card.querySelector(".card").addEventListener("click", () => {
          const modalTitle = document.getElementById("storyModalLabel");
          const modalBody = document.getElementById("storyModalBody");

          modalTitle.textContent = story.title;
          modalBody.innerHTML = `
                <img src="${story.image}" alt="${
            story.title
          }" class="img-fluid w-100 mb-3" style="height: 250px; object-fit: cover;" />
                <p><strong>By:</strong> ${story.researcher}</p>
                <p>${story.story || story.fullStory || story.description}</p>
                <div class="mb-2">
                  ${story.tags
                    .map(
                      (tag) =>
                        `<span class="badge bg-secondary me-1">${tag}</span>`
                    )
                    .join("")}
                </div>
              `;

          const storyModal = new bootstrap.Modal(
            document.getElementById("storyModal")
          );
          storyModal.show();
        });
        storyGrid.appendChild(card);
      });
    }

    tagFilter.addEventListener("change", () => {
      renderStories(tagFilter.value);
    });

    renderStories(); // initial load
  }

  loadStories();
</script>

<!-- Call to Action -->
<section class="p-5">
  <div class="container">
    <h4>Share your story:</h4>
    <div class="d-flex justify-content-center">
      <form
        id="actionForm"
        style="max-width: 600px; width: 100%"
        onsubmit="return false;"
      >
        <div class="mb-3">
          <label for="nameInput" class="form-label">Name</label>
          <input type="text" class="form-control" id="nameInput" required />
        </div>

        <div class="mb-3">
          <label for="emailInput" class="form-label">Email address</label>
          <input
            type="email"
            class="form-control"
            id="emailInput"
            aria-describedby="emailHelp"
            required
          />
          <div id="emailHelp" class="form-text">
            We'll never share your email with anyone else.
          </div>
        </div>

        <div class="mb-3">
          <label for="titleInput" class="form-label">Story Title</label>
          <input type="text" class="form-control" id="titleInput" required />
        </div>

        <div class="mb-3">
          <label for="descriptionInput" class="form-label"
            >Short Description</label
          >
          <textarea
            class="form-control"
            id="descriptionInput"
            rows="4"
            required
          ></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Submit Story</button>
      </form>
    </div>
  </div>
</section>

<footer class="text-white py-4 mt-5">
  <div class="container text-center">
    <p class="mb-1">
      &copy; 2025 Pittsburgh Supercomputing Center. All rights reserved.
    </p>
    <ul class="list-inline">
      <li class="list-inline-item">
        <a class="text-white text-decoration-none" href="#">Privacy Policy</a>
      </li>
      <li class="list-inline-item">
        <a class="text-white text-decoration-none" href="#">Terms of Use</a>
      </li>
      <li class="list-inline-item">
        <a class="text-white text-decoration-none" href="#">Contact</a>
      </li>
    </ul>
  </div>
</footer>

<!-- Bootstrap JS (with Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Call to action Script -->
<script>
  document
    .getElementById("actionForm")
    .addEventListener("submit", async function (e) {
      e.preventDefault();

      const data = {
        name: document.getElementById("nameInput").value,
        email: document.getElementById("emailInput").value,
        title: document.getElementById("titleInput").value,
        description: document.getElementById("descriptionInput").value,
      };

      const response = await fetch("https://psc-kbhx.onrender.com/submit", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      });

      if (response.ok) {
        document.getElementById("actionForm").reset();
      } else {
        alert("Submission failed.");
      }
    });
</script>
